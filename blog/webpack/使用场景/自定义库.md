# create-own-library åˆ›å»ºè‡ªå·±çš„åº“

å¦‚æœåˆ©ç”¨ webpack æ¥åˆ›å»ºè‡ªå·±çš„åº“æé«˜å¼€å‘æ•ˆç‡ï¼Œæˆ–è€…æœåŠ¡ç¤¾åŒºç”¨æˆ·ï¼Œé‚£è¯¥å¾ˆ cool å§~

è¿™é‡Œå°±ç®€å•å­¦ä¹ ä¸€ä¸‹å®˜æ–¹çš„æ ·ä¾‹ï¼Œå­¦ä¼šä¹‹åå°±å¯ä»¥å¼€å‘è‡ªå·±çš„åº“äº†ï¼Œæ¯”å¦‚ä¸€ä¸ª UI åº“ï¼ˆvue3 æ­£å¼å‘å¸ƒäº†ï¼Œå„å¤§ ui æ¡†æ¶åº”è¯¥éƒ½åœ¨ç«çƒ­ ğŸ”¥ å‡çº§ä¸­ï¼Œä¸å¦¨ç”¨ vue3 æ¥å¼€å‘ä¸€ä¸‹å‘¢ï¼‰

é¦–å…ˆæ¢³ç†ä¸€ä¸‹å¤§è‡´æµç¨‹ï¼š

1. åŸºæœ¬é…ç½®ï¼Œå…¥å£æ–‡ä»¶ã€å‡ºå£æ–‡ä»¶
2. é…ç½®åº“åï¼Œä»¥åŠå°†è¿™ä¸ªåº“æš´éœ²ç»™ä¸€ä¸ªå˜é‡
3. æ’é™¤ä¸å¿…è¦çš„å¤–éƒ¨ä¾èµ–
4. èƒ½å¤Ÿè®¿é—®å…¶ä»– library
5. èƒ½å¤Ÿé€šè¿‡`es6 import` `commonjs` å…¨å±€å˜é‡ç­‰æ–¹å¼å¼•å…¥

å¥½çš„ æˆ‘ä»¬é€æ­¥å¼€å§‹

é¦–å…ˆè¿›è¡Œç®€å•çš„é…ç½®

```js
const path = require('path');

module.exports = {
	entry: './src/index.js',
	output: {
		path: path.resolve(__dirname, 'dist'),
		filename: 'webpack-numbers.js'
	}
};
```

é…ç½®å¥½ sourcemapï¼Œä¾¿äºè°ƒè¯•ï¼ˆèƒ½å¸®åŠ©æˆ‘ä»¬æŸ¥çœ‹å‹ç¼©åçš„ä»£ç å¯¹åº”çš„æºç ï¼‰

### å¤–éƒ¨åŒ–ä¾èµ–é…ç½®

æ­£å¸¸çš„ external å¯ä»¥æŸ¥çœ‹`åŸºæœ¬é…ç½®`ä¸­çš„`external`æ–‡ä»¶ï¼Œ

è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯å¼•ç”¨äº†æŸä¸€ä¸ªä¾èµ–ä¸‹çš„å¤šä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬æ€ä¹ˆå¤„ç†

æ¯”å¦‚ï¼š

```js
import A from 'library/a';
import B from 'library/b';
```

æˆ‘ä»¬å¯ä»¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ¥ç¡®å®š

```js
module.exports = {
	//...
	externals: [
		'library/one',
		'library/two',
		// åŒ¹é…ä»¥ "library/" å¼€å§‹çš„æ‰€æœ‰ä¾èµ–
		/^library\/.+$/
	]
};
```

### æš´éœ² library

ä¸ºäº†è®©ä½ çš„ library èƒ½å¤Ÿåœ¨å„ç§ä½¿ç”¨ç¯å¢ƒä¸­å¯ç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦åœ¨ output ä¸­æ·»åŠ å±æ€§`library`ï¼Œ

```js
output: {
      path: path.resolve(__dirname, 'dist'),
      filename: 'webpack-numbers.js',
     library: 'webpackNumbers',
    },
```

è¿™ä¼šå°†ä½ çš„ library bundle æš´éœ²ä¸ºåä¸º webpackNumbers çš„å…¨å±€å˜é‡ï¼Œç”¨æˆ· é€šè¿‡æ­¤åç§°æ¥ import
ä¸ºäº†è®© library å’Œå…¶ä»–ç¯å¢ƒå…¼å®¹ï¼Œåˆ™éœ€è¦åœ¨é…ç½®ä¸­æ·»åŠ  libraryTarget å±æ€§ã€‚è¿™ä¸ªé€‰é¡¹å¯ä»¥æ§åˆ¶ä»¥å¤šç§å½¢å¼æš´éœ² libraryã€‚

```js
output: {
      path: path.resolve(__dirname, 'dist'),
      filename: 'webpack-numbers.js',
      library: 'webpackNumbers',
     libraryTarget: 'umd',
    },
```


